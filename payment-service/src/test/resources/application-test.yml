spring:
  application:
    name: payment-service-test

  datasource:
    url: jdbc:h2:mem:testdb
    driver-class-name: org.h2.Driver
    username: sa
    password: password

  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: true

  flyway:
    locations: classpath:db/migration
    baseline-on-migrate: true

  # Disable Kafka for tests
  kafka:
    bootstrap-servers: localhost:9092
    schema-registry:
      url: http://localhost:8081

# Test-specific Kafka configuration
app:
  kafka:
    topics:
      order-created: test.order.created
      payment-authorized: test.payment.authorized
      payment-failed: test.payment.failed
      payment-requested-retry: test.payment.requested.retry
      payment-requested-dlt: test.payment.requested.dlt

    consumer:
      group-id: payment-service-test-group
      retry-group-id: payment-service-test-retry-group

  payment:
    max-retry-attempts: 2

logging:
  level:
    com.example.paymentservice: DEBUG
    org.springframework.kafka: WARN
